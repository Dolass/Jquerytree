<!DOCTYPE html>
<HTML>
<HEAD>
    <TITLE> DEMO</TITLE>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
</HEAD>

<BODY  contentEditable="true">
<div>
    <h1>123Editor Test11Editor Test11Editor Test11Editor Test11Editor </h1>
    <div>aa</div>
    <div><span style="font-size: large;"><strong>001</strong></span></div>
    <div><span style="color: #ff0000;">002 123</span></div>
    <div><br clear="none"></div>
    <div><br clear="none"></div>
    <div><span style="color: #888888;"><input disabled="true" type="checkbox" class="en-todo">123</span></div>
    <div><br clear="none"></div>
    <div><br clear="none"></div>

    <div><br clear="none"></div>
    <div>
        <div>
            <p><span>显示以下查询字词的结果：</span>&nbsp;<a shape="rect" href="https://www.google.com.hk/search?hl=zh-CN&amp;newwindow=1&amp;safe=strict&amp;q=iframe+designmode&amp;spell=1&amp;sa=X&amp;ei=IYBhUZDnK4LOiAe2-IGYCA&amp;ved=0CC4QvwUoAA" target="_blank" id="">iframe iframe  iframe  iframe  iframe  iframe iframe iframe iframe iframe <em>designmode designmode designmode designmode designmode designmode designmode designmode designmode</em> test</a><br clear="none"><span>仍然搜索：</span>&nbsp;<a shape="rect" href="https://www.google.com.hk/search?hl=zh-CN&amp;newwindow=1&amp;safe=strict&amp;q=iframe+designmodel&amp;nfpr=1&amp;sa=X&amp;ei=IYBhUZDnK4LOiAe2-IGYCA&amp;ved=0CC8QvgUoAQ" target="_blank" id="">iframe designmodel</a></p>
        </div>
        <div>
            <div><br clear="none"></div>
            <div>
                <h2>搜索结果</h2>
                <div><ol><li>
                    <div>
                        <div>
                            <div><br clear="none"></div>
                        </div>
                        <h3><a shape="rect" href="https://www.google.com.hk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CDYQFjAA&amp;url=%68%74%74%70%3a%2f%2f%77%77%77%2e%69%74%65%79%65%2e%63%6f%6d%2f%62%6c%6f%67%2f%31%30%35%37%35%32&amp;ei=IYBhUZDnK4LOiAe2-IGYCA&amp;usg=AFQjCNENpUL9lUJjIJgw9tUUTBE-eNghqw&amp;sig2=kxYysMVdtLvvC-WlzGWoAQ" target="_blank" id=""><em>iframe</em>的<em>designmode</em>属性- 老别- ITeye技术网站</a></h3>
                        <div>
                            <div>
                                <div><br clear="none"></div>
                            </div>
                        </div>
                        <div>
                            <div><cite>www.iteye.com/blog/105752</cite><span>&nbsp;-&nbsp;<a shape="rect" href="http://webcache.googleusercontent.com/search?q=cache:YtLHLgj0P4oJ:www.iteye.com/blog/105752+&amp;cd=1&amp;hl=zh-CN&amp;ct=clnk&amp;gl=cn" target="_blank" id="">网页快照</a></span></div>
                            <span><span>2007年7月26日 –&nbsp;</span>contentWindow.document.<em>designMode</em>="on"; } --&gt; &lt;/script&gt; &lt;body onLoad="start()"&gt; &lt;<em>iframe</em>&nbsp;id="myiframe" style="width:750px; height:400px;&nbsp;<strong>...</strong><br clear="none"></span></div>
                    </div>
                </li><li>
                    <div>
                        <div>
                            <div><br clear="none"></div>
                        </div>
                        <h3><a shape="rect" href="http://stackoverflow.com/questions/6924841/enable-iframes-design-mode" target="_blank" id="">javascript - enable&nbsp;<em>iframe's design mode</em>&nbsp;- Stack Overflow</a></h3>
                        <div>
                            <div>
                                <div><br clear="none"></div>
                            </div>
                        </div>
                        <div>
                            <div><cite>stackoverflow.com/.../enable-<strong>iframes</strong>-design...</cite><span>&nbsp;-&nbsp;<a shape="rect" href="http://webcache.googleusercontent.com/search?q=cache:wVc6lHoh8nUJ:stackoverflow.com/questions/6924841/enable-iframes-design-mode+&amp;cd=2&amp;hl=zh-CN&amp;ct=clnk&amp;gl=cn" target="_blank" id="">网页快照</a></span><span>&nbsp;<span>-</span>&nbsp;<a shape="rect" href="http://translate.google.com.hk/translate?hl=zh-CN&amp;sl=en&amp;u=http://stackoverflow.com/questions/6924841/enable-iframes-design-mode&amp;prev=/search%3Fq%3Diframe%2Bdesignmode%26hl%3Dzh-CN%26newwindow%3D1%26safe%3Dstrict&amp;sa=X&amp;ei=IYBhUZDnK4LOiAe2-IGYCA&amp;ved=0CEAQ7gEwAQ" target="_blank" id="">翻译此页</a></span></div>
                            <div>1 个回答&nbsp;-&nbsp;2011年8月3日</div>
                            <span>i have an&nbsp;<em>iframe</em>&nbsp;and in javascript i enable the&nbsp;<em>design mode</em>&nbsp;as follows&nbsp;<strong>...</strong>&nbsp;Depending on the browser, there are a couple of potential issues:&nbsp;<strong>...</strong></span></div>
                    </div>
                </li></ol></div>
            </div>
        </div>
    </div>

</div>
<script type="text/javascript" src="js/jquery.min.js"></script>
<SCRIPT type="text/javascript">
    <!--    //DOMSubtreeModified
    alert(window.screen.availHeight + "," + window.screen.availWidth + "," + window.orientation);
    var keyboardHeight = 300;
    $("body").bind("keyup", function(e) {
        srollToCaret(keyboardHeight);
    });

    function scrollToCaret(keyboardHeight) {
        var wOri = window.orientation; wHeight = window.screen.availHeight, wWidth = window.screen.availWidth;
        if (Math.abs(wOri) == 90) {
            wHeight = wWidth + wHeight;
            wWidth = wHeight - wWidth;
            wHeight = wHeight - wWidth;
        }
        var cRange, rect;
        try {
            var sel = window.getSelection();
            if (sel.isCollapsed && sel.baseNode) {
                var baseNode = sel.baseNode;
                var baseOffset = sel.baseOffset;
                var txt = baseNode.textContent;
                var txtLen = txt.length;
                if (baseNode.nodeType == Node.TEXT_NODE) {
                    if (baseOffset > 0) {
                        cRange = document.createRange();
                        cRange.setStart(baseNode, baseOffset - 1);
                        cRange.setEnd(baseNode, baseOffset);
                        rect = cRange.getBoundingClientRect();
                    } else if (txtLen > 0) {
                        cRange = document.createRange();
                        cRange.setStart(baseNode, baseOffset);
                        cRange.setEnd(baseNode, baseOffset + 1);
                        rect = cRange.getBoundingClientRect();
                    } else {
                        rect = baseNode.parentElement.getBoundingClientRect();
                    }
                } else {
                    rect = baseNode.getBoundingClientRect();
                }
            }

        } catch (e) {
        }

        if (!rect) {
            return;
        }

        var sX = window.scrollX, sY = window.scrollY,
                fLeft = rect.right-1 +sX, fRight = rect.right + 10 + sX, fTop = rect.top + sY, fBottom = rect.bottom + sY,
                vMaxX = sX + wWidth, vMaxY = sY + wHeight - keyboardHeight,
                dx = sX, dy = sY;
        if (fBottom < sY) {
            dy = fTop;
        } else if (fTop > vMaxY) {
            dy = fBottom - wHeight + keyboardHeight;
        }
        if (fRight < sX) {
            dx = fLeft;
        } else if (fLeft > vMaxX) {
            dx = fRight - wWidth + 10;
        }
        if (dx !=0 || dy != 0) {
            window.scrollTo(dx, dy);
//                alert(fBottom + "," + sY + ";;; " + fTop + "," + vMaxY + "\n" + dx + "," + dy + "  " + wHeight);
//                alert(fRight + "," + sX + ";;; " + fLeft + "," + vMaxX + "\n" + dx + "," + dy + "  " + wWidth);
        }
    }

    setCaretBeforeElement = function setCaretBeforeElement(e) {
        var parent = e.parentElement;
        if (!parent) {
            return;
        }
        var children = Array.prototype.slice.call(parent.childNodes);
        var eIndex = children.indexOf(e);
        var sel = window.getSelection();
        sel.setBaseAndExtent(parent, eIndex, parent, eIndex);
    };
    setCaretAfterElement = function setCaretAfterElement(e) {
        var parent = e.parentElement;
        if (!parent) {
            return;
        }
        var children = Array.prototype.slice.call(parent.childNodes);
        var eIndex = children.indexOf(e);
        var sel = window.getSelection();
        sel.setBaseAndExtent(parent, eIndex + 1, parent, eIndex + 1);
    };

    function insertHtmlAtCaret(html) {
        var sel = window.getSelection();
        document.execCommand("insertHTML", false, html);
    }


    //-->
</SCRIPT>


</BODY>
</HTML>