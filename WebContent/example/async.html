<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
 <HEAD>
  <TITLE> ZTREE DEMO </TITLE>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="style/zTreeStyle.css" type="text/css">
  <style>
	body {
	background-color: white;
	margin:0; padding:0;
	text-align: center;
	}
	div, p, table, th, td {
		list-style:none; 
		margin:0; padding:0; 
		color:#333; font-size:12px; 
		font-family:宋体;
	}

	.tb1, .tb1 td {
		padding: 5px;
		border:1px dashed #EAB221;   
		border-collapse:collapse;  
	}

	.treeContent {
		width:200px; 
		height:400px; 
		overflow:auto;
		border:1px dashed #277327;  

	}
  </style>
  <script type="text/javascript" src="jquery-1.4.2.js"></script>
  <script type="text/javascript" src="jquery-ztree-2.0.js"></script>

  <SCRIPT LANGUAGE="JavaScript">
  <!--
	var zTree1;
	var setting;

		setting = {
			checkable: true,
			async: true,
			asyncUrl: "node.php",  //获取节点数据的URL地址
			asyncParam: ["name"],  //获取节点数据时，必须的数据名称，例如：id、name
			asyncParamOther: ["test","true"] //其它参数 ( key, value 键值对格式)
		};

		var zNodes =[];

	$(document).ready(function(){

		zTree1 = $("#tree1").zTree(setting, zNodes);

	});

	function zTreeOnClick(event, treeId, treeNode) {
		$("#lastClickNode").html("treeId=" + treeId + ";  tId=" + treeNode.tId + "; Name=" + treeNode.name);
	}

	
	function zTreeOnAsyncSuccess(event, treeId, msg) {
		$("#asyncStatus").html("treeId=" + treeId + ";  ZTREE_AJAX_SUCCESS " + getNow());
	}

	function zTreeOnAsyncError(event, treeId, XMLHttpRequest, textStatus, errorThrown) {
		$("#asyncStatus").html("treeId=" + treeId + ";  ZTREE_AJAX_ERROR" + getNow());
	}

	function refreshTree(asyncUrl) {
		setting.asyncUrl = asyncUrl;
		zTree1 = $("#tree1").zTree(setting, zNodes);
		$("#lastClickNode").html("");
		$("#dragNode").html("");
		$("#dropNode").html("");

	}

	function getNow() {
		var d = new Date();
		return d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + "." + d.getMilliseconds()
	}

  //-->
  </SCRIPT>
 </HEAD>

<BODY>
<center style="margin:10px"><b>异步加载演示</b></center>
<TABLE border=0 height=600px>
	<TR>
		<TD rowspan=2 width=200px align=left valign=top><div class="treeContent"><ul id="tree1" class="tree"></ul></div></TD>
		<TD height=120px align=center valign=top>
			<TABLE border=0 align=center class="tb1">
				<TR>
					<TD width=500px align=center valign=middle>asyncUrl：
						<INPUT TYPE="radio" id="php" NAME="url" checked onclick="refreshTree('node.php');">node.php（静态数据）
						<INPUT TYPE="radio" id="jsp" NAME="url" onclick="refreshTree('node.jsp');">node.jsp（动态数据）
					</TD>
				</TR>
				<TR>
					<TD colspan=4 align=center valign=middle style="color:red">使用 Tomcat 的朋友，可以选择 node.jsp，看看传递参数的动态结果 </TD>
				</TR>

			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD width=500px align=left valign=top><br/>
		onClick 事件：<a id="lastClickNode"></a><br/><br/>
		onAsync 事件：<a id="asyncStatus"></a>
		</TD>
	</TR>
</TABLE>
 </BODY>
</HTML>
