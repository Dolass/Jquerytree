/*
 * JQuery zTree 2.0
 * http://code.google.com/p/jquerytree/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Date: 2010-08-06
 *
 */
(function(e){function Ca(b,a){a.unbind(U);a.bind(U,function(c,f,d){typeof b.callback.click=="function"&&b.callback.click(c,f,d)});a.unbind(V);a.bind(V,function(c,f,d){typeof b.callback.change=="function"&&b.callback.change(c,f,d)});a.unbind(W);a.bind(W,function(c,f,d){typeof b.callback.rename=="function"&&b.callback.rename(c,f,d)});a.unbind(X);a.bind(X,function(c,f,d){typeof b.callback.remove=="function"&&b.callback.remove(c,f,d)});a.unbind(Y);a.bind(Y,function(c,f,d){typeof b.callback.drag=="function"&&
b.callback.drag(c,f,d)});a.unbind(M);a.bind(M,function(c,f,d,g){typeof b.callback.drop=="function"&&b.callback.drop(c,f,d,g)});a.unbind(Z);a.bind(Z,function(c,f,d){typeof b.callback.asyncSuccess=="function"&&b.callback.asyncSuccess(c,f,d)});a.unbind($);a.bind($,function(c,f,d,g,p){typeof b.callback.asyncError=="function"&&b.callback.asyncError(c,f,d,g,p)})}function H(b,a,c,f){if(c)for(var d=0;d<c.length;d++){var g=c[d];g.level=a;g.tId=b.treeObjId+"_"+ ++aa;g.parentNode=f;g.checkedNew=g.checkedNew==
undefined?g.checked==true:g.checkedNew;g.check_Focus=false;g.check_True_Full=true;g.check_False_Full=true;g.editNameStatus=false;g.isFirstNode=(f?f:b.root).nodes.length==c.length&&d==0;g.isLastNode=d==c.length-1;if(g.nodes&&g.nodes.length>0){g.open=g.open?true:false;g.isParent=true;ja(b,g);H(b,a+1,g.nodes,g)}else{g.isParent=g.isParent?true:false;ja(b,g);b.checkable&&d==c.length-1&&N(b,g)}}}function ja(b,a){var c=a.parentNode;c=c?e("#"+a.parentNode.tId+r):e("#"+b.treeObjId);c.append("<li id='"+a.tId+
"' class='tree-node'><button class=\"switch\" id='"+a.tId+q+"' title='' onfocus='this.blur();'></button><a id='"+a.tId+u+"' onclick=\""+(a.click||"")+'" ><button class="'+(a.iconSkin?a.iconSkin:"")+" ico\" id='"+a.tId+t+"' title='' onfocus='this.blur();'></button><span id='"+a.tId+B+"'></span></a><ul id='"+a.tId+r+"'></ul></li>");c=e("#"+a.tId+q);var f=e("#"+a.tId+u),d=e("#"+a.tId+B),g=e("#"+a.tId+r);d.text(a[b.nameCol]);d=e("#"+a.tId+t);if(b.showLine){if(a.level==0&&a.isFirstNode&&a.isLastNode)c.attr("class",
c.attr("class")+"_"+O);else if(a.level==0&&a.isFirstNode)c.attr("class",c.attr("class")+"_"+C);else a.isLastNode?c.attr("class",c.attr("class")+"_"+y):c.attr("class",c.attr("class")+"_"+P);a.isLastNode||g.addClass(D)}else c.attr("class",c.attr("class")+"_"+ka);if(a.isParent){var p=a.open?"_"+z:"_"+A;c.attr("class",c.attr("class")+p);d.attr("class",d.attr("class")+p)}else{c.attr("class",c.attr("class")+"_"+w);d.attr("class",d.attr("class")+"_"+w)}a.icon&&d.attr("style","background:url("+a.icon+") 0 0 no-repeat;");
g.css({display:a.open?"block":"none"});if(a.isParent){c.bind("click",{treeObjId:b.treeObjId,treeNode:a},Q);f.bind("dblclick",{treeObjId:b.treeObjId,treeNode:a},Q)}f.bind("click",function(){var j=true;if(typeof b.callback.beforeClick=="function")j=b.callback.beforeClick(b.treeObjId,a);if(j!=false){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();R(b,a);e("#"+b.treeObjId).trigger(U,[b.treeObjId,a])}});d.bind("mousedown",function(){a.editNameStatus=false});if(b.checkable){c.after("<BUTTON type='BUTTON' ID='"+
a.tId+"_check' onfocus='this.blur();' ></BUTTON>");var s=e("#"+a.tId+"_check");if(b.checkStyle==E&&b.checkRadioType==ba&&a.checkedNew)b.checkRadioCheckedList=b.checkRadioCheckedList.concat([a]);v(b,s,a);s.bind("click",function(){var j=true;if(typeof b.callback.beforeChange=="function")j=b.callback.beforeChange(b.treeObjId,a);if(j!=false){a.checkedNew=!a.checkedNew;if(b.checkStyle==E)if(a.checkedNew)if(b.checkRadioType==ba){for(var h=b.checkRadioCheckedList.length-1;h>=0;h--){j=b.checkRadioCheckedList[h];
j.checkedNew=false;b.checkRadioCheckedList.splice(h,1);v(b,e("#"+j.tId+"_check"),j);j.parentNode!=a.parentNode&&la(b,j)}b.checkRadioCheckedList=b.checkRadioCheckedList.concat([a])}else{h=a.parentNode?a.parentNode:b.root;for(var i=0;i<h.nodes.length;i++){j=h.nodes[i];if(j.checkedNew&&j!=a){j.checkedNew=false;v(b,e("#"+j.tId+"_check"),j)}}}else{if(b.checkRadioType==ba)for(h=0;h<b.checkRadioCheckedList.length;h++)if(a==b.checkRadioCheckedList[h]){b.checkRadioCheckedList.splice(h,1);break}}else{a.checkedNew&&
b.checkType.Y.indexOf("p")>-1&&ca(b,a,true);a.checkedNew&&b.checkType.Y.indexOf("s")>-1&&da(b,a,true);!a.checkedNew&&b.checkType.N.indexOf("p")>-1&&ca(b,a,false);!a.checkedNew&&b.checkType.N.indexOf("s")>-1&&da(b,a,false)}v(b,s,a);la(b,a);e("#"+b.treeObjId).trigger(V,[b.treeObjId,a])}});s.bind("mouseover",function(){a.checkboxFocus=true;v(b,s,a)});s.bind("mouseout",function(){a.checkboxFocus=false;v(b,s,a)})}f.attr("target",a.target||"_blank");a.url&&!b.editable&&f.attr("href",a.url);b.editable&&
f.hover(function(){if(b.dragStatus==0){I(a);J(a);ma(b,a);na(b,a)}},function(){I(a);J(a)});f.bind("mousedown",function(j){if(!(j.button==2||!b.editable)){var h=document,i,l,Da=j.clientX,Ea=j.clientY;e(h).mousemove(function(o){if(a.editNameStatus)return true;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();if(b.dragStatus==0&&Math.abs(Da-o.clientX)<oa&&Math.abs(Ea-o.clientY)<oa)return true;e("body").css("cursor","pointer");e("#"+a.tId+q);if(b.dragStatus==0&&a.isParent&&
a.open){x(b,a,!a.open);b.dragNodeShowBefore=true}if(b.dragStatus==0){b.dragStatus=-1;var k=true;if(typeof b.callback.beforeDrag=="function")k=b.callback.beforeDrag(b.treeObjId,a);if(k==false)return;b.dragStatus=1;pa(true);R(b,a);I(a);J(a);k=e("#"+a.tId).clone();k.attr("id",a.tId+"_tmp");k.css("padding","0");k.children("#"+a.tId+u).removeClass(ea);k.children("#"+a.tId+r).css("display","none");i=e("<ul class='zTreeDragUL'></ul>").append(k);i.attr("id",a.tId+r+"_tmp");i.addClass(e("#"+b.treeObjId).attr("class"));
i.appendTo("body");e("#"+b.treeObjId).trigger(Y,[b.treeObjId,a])}if(b.dragStatus==1){if(l){l.removeClass(fa);l.removeClass(S)}l=null;if(o.target.id==b.treeObjId&&a.parentNode!=null){l=e("#"+b.treeObjId);l.addClass(fa)}else if(o.target.id&&e("#"+b.treeObjId).find("#"+o.target.id).length>0){for(k=e("#"+o.target.id);!k.is("li")&&k.attr("id")!=b.treeObjId;)k=k.parent();if(a.parentNode&&k.attr("id")!=a.tId&&k.attr("id")!=a.parentNode.tId&&e("#"+a.tId).find("#"+k.attr("id")).length==0){k.children("a").addClass(S);
l=k.children("a")}else if(a.parentNode==null&&k.attr("id")!=a.tId&&e("#"+a.tId).find("#"+k.attr("id")).length==0){k.children("a").addClass(S);l=k.children("a")}}i.css({top:o.clientY+(h.body.scrollTop==0?h.documentElement.scrollTop:h.body.scrollTop)+3+"px",left:o.clientX+(h.body.scrollLeft==0?h.documentElement.scrollLeft:h.body.scrollLeft)+3+"px"})}return false});e(h).mouseup(function(){e(h).unbind("mousemove");e(h).unbind("mouseup");e("body").css("cursor","auto");if(l){l.removeClass(fa);l.removeClass(S)}pa(false);
if(b.dragStatus!=0){b.dragStatus=0;if(a.isParent&&b.dragNodeShowBefore&&!a.open){x(b,a,!a.open);b.dragNodeShowBefore=false}i&&i.remove();if(l){var o="";if(l.attr("id")==b.treeObjId)o=null;else{for(l=l.parent();!l.is("li")&&l.attr("id")!=b.treeObjId;)l=l.parent();o=l.attr("id")}o=o==null?null:ga(b.root.nodes,o);var k=true;if(typeof b.callback.beforeDrop=="function")k=b.callback.beforeDrop(b.treeObjId,a,o);if(k!=false){qa(b,o,a);e("#"+b.treeObjId).trigger(M,[b.treeObjId,a,o])}}else e("#"+b.treeObjId).trigger(M,
[b.treeObjId,null,null])}})}})}function Fa(b,a){if(b.setSelectionRange){b.focus();b.setSelectionRange(a,a)}else if(b.createTextRange){var c=b.createTextRange();c.collapse(true);c.moveEnd("character",a);c.moveStart("character",a);c.select()}}function pa(b){for(;T.length>0;){T[0].remove();T.shift()}if(b){b=e("iframe");for(var a=0;a<b.length;a++){var c=b.get(a),f;f=c;var d=Array(2);oRect=f.getBoundingClientRect();d[0]=oRect.left;d[1]=oRect.top;f=d;c=e("<div id='zTreeMask_"+a+"' class='zTreeMask' style='top:"+
f[1]+"px; left:"+f[0]+"px; width:"+c.offsetWidth+"px; height:"+c.offsetHeight+"px;'></div>");c.appendTo("body");T.push(c)}}}function n(b,a){if(b){var c=b.attr("class");if(c!=undefined){c=c.split("_");switch(a){case O:case C:case P:case y:case ka:c[1]=a;break;case z:case A:case w:c[2]=a;break}b.attr("class",c.join("_"))}}}function F(b,a){if(b){var c=b.attr("class");if(c!=undefined){c=c.split("_");switch(a){case z:case A:case w:c[1]=a;break}b.attr("class",c.join("_"))}}}function I(b){e("#"+b.tId+K).unbind().remove()}
function J(b){e("#"+b.tId+G).unbind().remove()}function ma(b,a){if(!(!b.edit_renameBtn||a.editNameStatus||e("#"+a.tId+K).length>0)){var c=e("#"+a.tId+u),f="<button class='edit' id='"+a.tId+K+"' title='' onfocus='this.blur();' style='display:none;'></button>";c.append(f);var d=e("#"+a.tId+K);if(b.treeObj.attr("offsetLeft")+b.treeObj.attr("offsetWidth")+b.treeObj.attr("scrollLeft")-c.attr("offsetLeft")-c.attr("offsetWidth")-2*d.width()-15<0){d.remove();c.prepend(f);d=e("#"+a.tId+K)}d.bind("click",function(){var g=
true;if(typeof b.callback.beforeRename=="function")g=b.callback.beforeRename(b.treeObjId,a);if(g!=false){I(a);J(a);a.editNameStatus=true;R(b,a);return false}}).bind("mousedown",function(){return true}).show()}}function na(b,a){if(!(!b.edit_removeBtn||e("#"+a.tId+G).length>0)){var c=e("#"+a.tId+u),f="<button class='remove' id='"+a.tId+G+"' title='' onfocus='this.blur();' style='display:none;'></button>";c.append(f);var d=e("#"+a.tId+G);if(b.treeObj.attr("offsetLeft")+b.treeObj.attr("offsetWidth")-
c.attr("offsetLeft")-c.attr("offsetWidth")-1*d.width()-15<0){d.remove();c.prepend(f);d=e("#"+a.tId+G)}e("#"+a.tId+G).bind("click",function(){var g=true;if(typeof b.callback.beforeRemove=="function")g=b.callback.beforeRemove(b.treeObjId,a);if(g!=false){ra(b,a);e("#"+b.treeObjId).trigger(X,[b.treeObjId,a]);return false}}).bind("mousedown",function(){return true}).show()}}function v(b,a,c){if(a){a.removeClass();b=b.checkStyle+"_"+(c.checkedNew?Ga:Ha)+"_"+(c.checkedNew||b.checkStyle==E?c.check_True_Full?
sa:ta:c.check_False_Full?sa:ta);b=c.checkboxFocus?b+"_"+Ia:b;a.addClass(Ja);a.addClass(b)}}function N(b,a){if(a&&a.parentNode){for(var c=true,f=true,d=0;d<a.parentNode.nodes.length;d++){if(b.checkStyle==E&&(a.parentNode.nodes[d].checkedNew||!a.parentNode.nodes[d].check_True_Full))c=false;else if(b.checkStyle!=E&&a.parentNode.checkedNew&&(!a.parentNode.nodes[d].checkedNew||!a.parentNode.nodes[d].check_True_Full))c=false;else if(b.checkStyle!=E&&!a.parentNode.checkedNew&&(a.parentNode.nodes[d].checkedNew||
!a.parentNode.nodes[d].check_False_Full))f=false;if(!c||!f)break}a.parentNode.check_True_Full=c;a.parentNode.check_False_Full=f;c=e("#"+a.parentNode.tId+"_check");v(b,c,a.parentNode);N(b,a.parentNode)}}function la(b,a){a.nodes&&a.nodes.length>0?N(b,a.nodes[0]):N(b,a)}function Q(b){ua(m[b.data.treeObjId],b.data.treeNode)}function ua(b,a){if(a&&a.nodes&&a.nodes.length>0)x(b,a,!a.open);else b.async&&!b.editable&&va(b,a)}function va(b,a){for(var c="",f=0;a&&f<b.asyncParam.length;f++)c+=(c.length>0?"&":
"")+b.asyncParam[f]+"="+a[b.asyncParam[f]];for(f=0;f<b.asyncParamOther.length;f+=2)c+=(c.length>0?"&":"")+b.asyncParamOther[f]+"="+b.asyncParamOther[f+1];e.ajax({type:"POST",url:b.asyncUrl,data:c,success:function(d){if(!(!d||d.length==0)){var g="";try{g=eval("("+d+")")}catch(p){}g&&g!=""&&wa(b,a,g);e("#"+b.treeObjId).trigger(Z,[b.treeObjId,d])}},error:function(d,g,p){e("#"+b.treeObjId).trigger($,[b.treeObjId,d,g,p])}})}function x(b,a,c,f,d){if(!a||a.open==c)typeof d=="function"&&d();else{c=e("#"+
a.tId+q);var g=e("#"+a.tId+t),p=e("#"+a.tId+r);if(a.isParent&&a.nodes&&a.nodes.length>0)if(a.open){if(f==false){p.hide();typeof d=="function"&&d()}else p.hide(b.expandSpeed,d);n(c,A);F(g,A);a.open=false}else{if(f==false){p.show();typeof d=="function"&&d()}else p.show(b.expandSpeed,d);n(c,z);F(g,z);a.open=true}}}function ha(b,a,c,f,d){var g=a?a.nodes:b.root.nodes,p=a?false:f;if(g)for(var s=0;s<g.length;s++)g[s]&&ha(b,g[s],c,p);x(b,a,c,f,d)}function L(b,a,c,f,d){if(a.parentNode){x(b,a,c,f);a.parentNode&&
L(b,a.parentNode,c,f,d)}else x(b,a,c,f,d)}function ca(b,a,c){var f=e("#"+a.tId+"_check");a.checkedNew=c;v(b,f,a);if(a.parentNode){f=true;if(!c)for(var d=0;d<a.parentNode.nodes.length;d++)if(a.parentNode.nodes[d].checkedNew){f=false;break}f&&ca(b,a.parentNode,c)}}function da(b,a,c){if(a){var f=e("#"+a.tId+"_check");a.checkedNew=c;v(b,f,a);if(a.nodes)for(f=0;f<a.nodes.length;f++)a.nodes[f]&&da(b,a.nodes[f],c)}}function xa(b,a){if(a){a.level=b?b.level+1:0;if(a.nodes)for(var c=0;c<a.nodes.length;c++)a.nodes[c]&&
xa(a,a.nodes[c])}}function wa(b,a,c){if(a){if(e("#"+b.treeObjId).find("#"+a.tId).length!=0){target_switchObj=e("#"+a.tId+q);target_icoObj=e("#"+a.tId+t);target_aObj=e("#"+a.tId+u);target_ulObj=e("#"+a.tId+r);if(!a.open){n(target_switchObj,A);F(target_icoObj,A);a.open=false;target_ulObj.css({display:"none"})}if(!a.isParent){target_switchObj.unbind("click");target_switchObj.bind("click",function(){x(b,a,!a.open)});target_aObj.unbind("dblclick");target_aObj.bind("dblclick",{treeObjId:b.treeObjId,treeNode:a},
Q)}ya(a,c);H(b,a.level+1,c,a);L(b,a,true)}}else{ya(b.root,c);H(b,0,c,null)}}function ya(b,a){if(!b.nodes)b.nodes=[];if(b.nodes.length>0){var c=b.nodes[b.nodes.length-1].tId;b.nodes[b.nodes.length-1].isLastNode=false;b.nodes[b.nodes.length-1].isFirstNode?n(e("#"+c+q),C):n(e("#"+c+q),P);e("#"+c+r).addClass(D)}b.isParent=true;b.nodes=b.nodes.concat(a)}function qa(b,a,c,f){if(a!=c){var d=c.parentNode==null?b.root:c.parentNode,g=a===null||a==b.root;if(g&&a===null)a=b.root;var p=e("#"+c.tId+q),s=e("#"+
c.tId+r),j,h,i,l;if(g)j=j=e("#"+b.treeObjId);else{h=e("#"+a.tId+q);i=e("#"+a.tId+t);l=e("#"+a.tId+u);j=e("#"+a.tId+r)}n(h,z);F(i,z);a.open=true;j.css({display:"block"});if(!a.isParent&&!g){h.unbind("click");h.bind("click",function(){x(b,a,!a.open)});l.unbind("dblclick");l.bind("dblclick",{treeObjId:b.treeObjId,treeNode:a},Q)}j.append(e("#"+c.tId).detach());h=-1;for(i=0;i<d.nodes.length;i++)if(d.nodes[i].tId==c.tId)h=i;h>=0&&d.nodes.splice(h,1);if(a.nodes){if(b.showLine&&a.nodes.length>0){a.nodes[a.nodes.length-
1].isLastNode=false;h=e("#"+a.nodes[a.nodes.length-1].tId+r);i=e("#"+a.nodes[a.nodes.length-1].tId+q);h.addClass(D);g&&a.nodes[a.nodes.length-1].isFirstNode?n(i,C):n(i,P)}}else a.nodes=[];if(g)c.parentNode=null;else{a.isParent=true;c.parentNode=a}xa(c.parentNode,c);a.nodes.splice(a.nodes.length,0,c);c.isLastNode=true;c.isFirstNode=a.nodes.length==1;if(b.showLine){n(p,y);s.removeClass(D)}if(d.nodes.length<1){d.isParent=false;h=e("#"+d.tId+r);i=e("#"+d.tId+q);c=e("#"+d.tId+t);n(i,w);F(c,w);h.css("display",
"none")}else if(b.showLine){d.nodes[d.nodes.length-1].isLastNode=true;d.nodes[d.nodes.length-1].isFirstNode=d.nodes.length==1;h=e("#"+d.nodes[d.nodes.length-1].tId+r);i=e("#"+d.nodes[d.nodes.length-1].tId+q);c=e("#"+d.nodes[d.nodes.length-1].tId+t);if(d==b.root)if(d.nodes.length==1)n(i,O);else{d=e("#"+d.nodes[0].tId+q);n(d,C);n(i,y)}else n(i,y);h.removeClass(D)}L(b,a,true,f)}}function ra(b,a){var c=a.parentNode==null?b.root:a.parentNode;if(b.curTreeNode===a)b.curTreeNode=null;if(b.curEditTreeNode===
a)b.curEditTreeNode=null;e("#"+a.tId).remove();for(var f=-1,d=0;d<c.nodes.length;d++)if(c.nodes[d].tId==a.tId)f=d;f>=0&&c.nodes.splice(f,1);if(c.nodes.length<1){c.isParent=false;f=e("#"+c.tId+r);d=e("#"+c.tId+q);c=e("#"+c.tId+t);n(d,w);F(c,w);f.css("display","none")}else if(b.showLine){c.nodes[c.nodes.length-1].isLastNode=true;c.nodes[c.nodes.length-1].isFirstNode=c.nodes.length==1;f=e("#"+c.nodes[c.nodes.length-1].tId+r);d=e("#"+c.nodes[c.nodes.length-1].tId+q);e("#"+c.nodes[c.nodes.length-1].tId+
t);if(c==b.root)if(c.nodes.length==1)n(d,O);else{c=e("#"+c.nodes[0].tId+q);n(c,C);n(d,y)}else n(d,y);f.removeClass(D)}}function ga(b,a){if(!b||!a)return null;for(var c=0;c<b.length;c++){if(b[c].tId==a)return b[c];var f=ga(b[c].nodes,a);if(f)return f}return null}function za(b){if(b.curTreeNode){I(b.curTreeNode);J(b.curTreeNode);e("#"+b.curTreeNode.tId+u).removeClass(ea);e("#"+b.curTreeNode.tId+B).text(b.curTreeNode[b.nameCol]);b.curTreeNode=null}}function Ka(b){if(b.curEditTreeNode){e("#"+b.curEditTreeNode.tId+
u).removeClass(Aa);e("#"+b.curEditTreeNode.tId+ia).unbind();e("#"+b.curEditTreeNode.tId+B).text(b.curEditTreeNode[b.nameCol]);b.curEditTreeNode.editNameStatus=false;b.curEditTreeNode=null}}function R(b,a){if(!(b.curTreeNode==a&&!b.editable)){za(b);Ka(b);if(b.editable){ma(b,a);na(b,a)}if(a.editNameStatus){e("#"+a.tId+B).html("<input type=text class='rename' id='"+a.tId+ia+"'>");var c=e("#"+a.tId+ia);c.attr("value",a[b.nameCol]);c.focus();Fa(c.get(0),a[b.nameCol].length);c.bind("blur",function(){a[b.nameCol]=
this.value;e("#"+b.treeObjId).trigger(W,[b.treeObjId,a])}).bind("click",function(){return false}).bind("dblclick",function(){return false});e("#"+a.tId+u).addClass(Aa);b.curEditTreeNode=a}else e("#"+a.tId+u).addClass(ea);b.curTreeNode=a}}function Ba(b,a){if(!b)return[];for(var c=[],f=0;f<b.length;f++){if(b[f].checkedNew==a)c=c.concat([b[f]]);var d=Ba(b[f].nodes,a);if(d.length>0)c=c.concat(d)}return c}function La(){return{container:null,init:function(b){this.container=b;return this},refresh:function(){var b=
this.container.attr("id");e("#"+b).empty();m[b].curTreeNode=null;aa=0;H(m[b],0,m[b].root.nodes)},setEditable:function(b){var a=this.container.attr("id");m[a].editable=b;return this.refresh()},getNodes:function(){var b=this.container.attr("id");return m[b].root.nodes},getSelectedNode:function(){var b=this.container.attr("id");return m[b].curTreeNode},getCheckedNodes:function(b){var a=this.container.attr("id");if(a){b=b!=false;return Ba(m[a].root.nodes,b)}},getNodeByTId:function(b){var a=this.container.attr("id");
if(a&&b)return ga(m[a].root.nodes,b)},getNodeIndex:function(b){var a=this.container.attr("id");if(a&&b){a=b.parentNode==null?m[a].root:b.parentNode;for(var c=0;c<a.nodes.length;c++)if(a.nodes[c]==b)return c;return-1}},expandAll:function(b){var a=this.container.attr("id");ha(m[a],null,b,true)},expandNode:function(b,a,c){var f=this.container.attr("id");if(f&&b){a&&L(m[f],b,a,false);if(c)ha(m[f],b,a,false,function(){e("#"+b.tId+t).focus().blur()});else if(b.open!=a){ua(m[f],b);e("#"+b.tId+t).focus().blur()}}},
selectNode:function(b){var a=this.container.attr("id");if(a&&b){R(m[a],b);L(m[a],b,true,false,function(){e("#"+b.tId+t).focus().blur()})}},cancleSelectedNode:function(){var b=this.container.attr("id");b&&za(m[b])},addNodes:function(b,a){var c=this.container.attr("id");if(c&&a){b||(b=null);wa(m[c],b,a)}},updateNode:function(b){var a=this.container.attr("id");a&&b&&e("#"+b.tId+B).text(b[m[a].nameCol])},moveNode:function(b,a){var c=this.container.attr("id");if(c&&a)if(!(b&&(a.parentNode==b||e("#"+a.tId).find("#"+
b.tId).length>0))){b||(b=null);qa(m[c],b,a,false)}},removeNode:function(b){var a=this.container.attr("id");a&&b&&ra(m[a],b)}}}var U="ZTREE_CLICK",V="ZTREE_CHANGE",W="ZTREE_RENAME",X="ZTREE_REMOVE",Y="ZTREE_DRAG",M="ZTREE_DROP",Z="ZTREE_ASYNC_SUCCESS",$="ZTREE_ASYNC_ERROR",q="_switch",t="_ico",B="_span",ia="_input",K="_edit",G="_remove",r="_ul",u="_a",O="root",C="roots",P="center",y="bottom",ka="noLine",D="line",z="open",A="close",w="docu",ea="curSelectedNode",Aa="curSelectedNode_Edit",fa="tmpTargetTree",
S="tmpTargetNode",E="radio",Ja="chk",Ha="false",Ga="true",sa="full",ta="part",Ia="focus",ba="all",oa="5",m=[],aa=0;e.fn.zTree=function(b,a){var c={treeObjId:"",checkable:false,editable:false,edit_renameBtn:true,edit_removeBtn:true,showLine:true,curTreeNode:null,curEditTreeNode:null,dragStatus:0,dragNodeShowBefore:false,checkStyle:"checkbox",checkType:{Y:"ps",N:"ps"},checkRadioType:"level",checkRadioCheckedList:[],async:false,asyncUrl:"",asyncParam:[],asyncParamOther:[],nameCol:"name",expandSpeed:"fast",
root:{isRoot:true,nodes:[]},callback:{beforeClick:null,beforeChange:null,beforeDrag:null,beforeDrop:null,beforeRename:null,beforeRemove:null,click:null,change:null,drag:null,drop:null,rename:null,remove:null,asyncSuccess:null,asyncError:null}};b&&e.extend(c,b);c.treeObjId=this.attr("id");c.treeObj=this;c.root.tId=-1;c.root.name="ZTREE ROOT";c.root.isRoot=true;c.checkRadioCheckedList=[];aa=0;if(a)c.root.nodes=a;m[c.treeObjId]=c;e("#"+c.treeObjId).empty();if(c.root.nodes&&c.root.nodes.length>0)H(c,
0,c.root.nodes);else c.async&&c.asyncUrl&&c.asyncUrl.length>0&&va(c);Ca(c,this);return(new La).init(this)};var T=[]})(jQuery);