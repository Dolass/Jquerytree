<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
 <HEAD>
  <TITLE> ZTREE DEMO </TITLE>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="demoStyle/demo.css" type="text/css">
  <link rel="stylesheet" href="zTreeStyle/zTreeStyle.css" type="text/css">
  <script type="text/javascript" src="jquery-1.4.2.js"></script>
  <script type="text/javascript" src="jquery.ztree-2.6.js"></script>
  <script type="text/javascript" src="demoTools.js"></script>
  <style type="text/css">
  .test {
  	margin: 0 0 0 5px;
  }
  .radioBtn {
  	height: 16px;
 	vertical-align: middle;
  }
  .checkboxBtn {
 	vertical-align: middle;
  }
  </style>
  <SCRIPT LANGUAGE="JavaScript">
  <!--
	var zTree1;

	var IDMark_A = "_a";
	
	var setting= {
		//expandSpeed:"",
		fontCss: setFontCss,
		addDiyDom: addDiyDom,
		callback: {
			beforeClick: zTreeOnBeforeClick,
			beforeExpand: zTreeOnBeforeExpand,
			expand: zTreeOnExpand
		}
	};

	var zNodes =[
	 	{id:1, name:"CPU",
		 	nodes:[
		 	       {id:11, name:"Intel"},
		 	       {id:12, name:"AMD"}
			]},
	 	{id:2, name:"涓绘澘",
	 		nodes:[
		 	       {id:21, name:"鍗庣"},
		 	       {id:22, name:"鎶�槈"},
		 	       {id:23, name:"寰槦"},
		 	       {id:24, name:"涓冨僵铏�},
		 	       {id:25, name:"鏄犳嘲"}
			]},
		{id:3, name:"鏄惧崱",
	 		nodes:[
		 	       {id:31, name:"鍗庣"},
		 	       {id:32, name:"绱㈡嘲"},
		 	       {id:33, name:"寰槦"},
		 	       {id:34, name:"褰遍┌"},
		 	       {id:35, name:"涓冨僵铏�}
			]},
		{id:4, name:"鍐呭瓨",
	 		nodes:[
		 	       {id:41, name:"閲戝＋椤�},
		 	       {id:42, name:"濞佸垰"},
		 	       {id:43, name:"瀹囩灮"},
		 	       {id:44, name:"涓夋槦"},
		 	       {id:45, name:"鐜颁唬"}
			]},
		{id:5, name:"纭洏",
	 		nodes:[
		 	       {id:51, name:"甯屾嵎"},
		 	       {id:52, name:"瑗块儴鏁版嵁"},
		 	       {id:53, name:"鏃ョ珛"},
		 	       {id:54, name:"涓夋槦"},
		 	       {id:55, name:"涓滆姖"},     
		 	       {id:56, name:"瀵屽＋閫�}
			]}
	 	];


	$(document).ready(function(){
		reloadTree();
	});

	function setFontCss(treeId, treeNode) {
		if (treeNode.level==0 && treeNode.oldName && treeNode.oldName != treeNode.name) {
			return {"color":"#2C8A24"};
		} else if (treeNode.level==0) {
			return {"color":"blue"};
		} else {
			return {"color":"#000000"};
		}
	}

	var curExpandNode = null;
	function zTreeOnBeforeClick(treeId, treeNode) {
		if (treeNode.level == 0 && !treeNode.open) {
			zTree1.expandNode(treeNode, true);
			if (curExpandNode && curExpandNode.open==true) {
				zTree1.expandNode(curExpandNode, false);
			}
			curExpandNode = treeNode;
		} else if (treeNode.level == 1) {
			var btn = $("#radio_" + treeNode.id).attr("checked", true);
			checkBrand(treeNode, btn);
		}
		return false;
	}
	function zTreeOnBeforeExpand(treeId, treeNode) {
		if (curExpandNode && curExpandNode.open==true) {
			zTree1.expandNode(curExpandNode, false);
		}
	}

	function zTreeOnExpand(event, treeId, treeNode) {
		curExpandNode = treeNode;
	}

	function addDiyDom(treeId, treeNode) {
		var aObj = $("#" + treeNode.tId + IDMark_A);
		if (treeNode.level == 0) {
			var editStr = "<input type='checkbox' class='checkboxBtn' id='checkbox_" +treeNode.id+ "' onfocus='this.blur();'></input>";
			aObj.before(editStr);
			var btn = $("#checkbox_"+treeNode.id);
			if (btn) btn.bind("change", function() {checkAccessories(treeNode, btn);});
		} else if (treeNode.level == 1) {
			var editStr = "<input type='radio' class='radioBtn' id='radio_" +treeNode.id+ "' name='radio_"+treeNode.parentNode.id+"' onfocus='this.blur();'></input>";
			aObj.before(editStr);
			var btn = $("#radio_"+treeNode.id);
			if (btn) btn.bind("click", function() {checkBrand(treeNode, btn);});
		}
	}

	function checkAccessories(treeNode, btn) {
		var checkedRadio = getCheckedRadio("radio_"+treeNode.id);
		if (btn.attr("checked")) {
			if (!checkedRadio) {
				$("#radio_" + treeNode.nodes[0].id).attr("checked", true);
			}
		} else {
			checkedRadio.attr("checked", false);
		}
		addBrandName(treeNode);
	}

	function checkBrand(treeNode, btn) {
		if (btn.attr("checked")) {
			var pObj = $("#checkbox_" + treeNode.parentNode.id);
			if (!pObj.attr("checked")) {
				pObj.attr("checked", true);
			}
			addBrandName(treeNode.parentNode);
		}
	}
	
	function addBrandName(treeNode) {
		if (!treeNode.oldName) {
			treeNode.oldName = treeNode.name;
		}
		var brandName = "";
		if ($("#checkbox_" + treeNode.id).attr("checked")) {
			var checkedBrand = getCheckedRadio("radio_"+treeNode.id);
			var brandNode = zTree1.getNodeByParam("id", parseInt(checkedBrand.attr("id").replace("radio_", "")));
			if (brandNode) brandName = " - " + brandNode.name;
		}
		treeNode.name = treeNode.oldName + brandName;
		zTree1.updateNode(treeNode);
	}

	function getCheckedRadio(radioName) {  
		var r = document.getElementsByName(radioName);
		for(var i=0; i<r.length; i++)    { 
			if(r[i].checked)    { 
				return $(r[i]); 
			} 
		}         
	    return null;       
	}   

	function reloadTree() {
		zTree1 = $("#treeDemo").zTree(setting, clone(zNodes, ""));
	}
	

  //-->
  </SCRIPT>
 </HEAD>

<BODY>
<center class="headTitle">楂樼骇搴旂敤婕旂ず<span> 鈥斺� checkbox & radio 鍏卞瓨</span></center>
<TABLE border=0 width="700" class="tb1">
	<TR>
		<TD width=340px align=center valign=top>
		<div class="zTreeDemoBackground">
			<ul id="treeDemo" class="tree"></ul>
		</div>		
		</TD>
		<TD width=360px align=left valign=top>
		<div class="demoContent">
			<li class="title focus">
				<button class="ico star" onfocus="this.blur();"></button>checkbox & radio 鍏卞瓨璇存槑
				<ul class="remark">1銆佹紨绀烘敞閲�/ul>
				<ul class="event">
					<li>&nbsp;&nbsp;鐐瑰嚮涓嶅悓鐨勮妭鐐硅瘯璇曠湅銆�/li>
					<li>&nbsp;&nbsp;鐐瑰嚮 checkbox 鎴�radio 璇曡瘯鐪嬨�</li>
				</ul>
				<ul class="remark">2銆佷娇鐢ㄨ嚜瀹氫箟鎺т欢鐨勬帴鍙ｅ疄鐜�/ul>
				<ul class="event">
					<li>&nbsp;&nbsp;鏃㈢劧闇�鍏卞瓨锛屼篃灏变笉鍙兘浣跨敤 zTree 鍐呴儴鐨�checkbox 鎴�radio 鐨�check 瑙勫垯锛屾墍浠ヤ竴瀹氳浣跨敤鑷畾涔夋帶浠剁殑鎺ュ彛銆�/li>
					<li>&nbsp;&nbsp;鍙傛暟锛歴etting.addDiyDom</li>
					<li>&nbsp;&nbsp;姣忕粍鎺т欢鐨�check 瑙勫垯锛屽畬鍏ㄦ牴鎹綘鑷繁鐨勯渶姹傦紝鑷璁惧畾銆�/li>
				</ul>
				<ul class="remark">3銆侀殢鎰忔洿鏂版枃瀛楅鑹�/ul>
				<ul class="event">
					<li>&nbsp;&nbsp;閫氳繃鍒╃敤 setting.fontCss 鍙傛暟鍙互閽堝鑺傜偣鍦ㄤ笉鍚岀姸鎬佹椂锛岃缃笉鍚岀殑棰滆壊銆�/li>
				</ul>
				<ul class="remark">4銆佹瘡娆″彧灞曞紑涓�釜鑺傜偣鐨勫皾璇�/ul>
				<ul class="event">
					<li>&nbsp;&nbsp;鍒╃敤 beforeClick銆乥eforeExpand銆乪xpand 杩欎笁绉嶄簨浠讹紝鍙互瀹屽叏瀹炵幇姣忔鍙兘灞曞紑涓�釜鐖惰妭鐐圭殑鍔熻兘锛屽杩欎釜鍔熻兘鏈夊叴瓒ｇ殑鏈嬪弸鍙互鍙傝�涓�笅銆�/li>
				</ul>
			</li>
		</div>	
		</TD>
	</TR>
</TABLE>
</BODY>
</HTML>
