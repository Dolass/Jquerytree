<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
 <HEAD>
  <TITLE> ZTREE DEMO </TITLE>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="demoStyle/demo.css" type="text/css">
  <link rel="stylesheet" href="zTreeStyle/zTreeStyle.css" type="text/css">
  <script type="text/javascript" src="jquery-1.4.2.js"></script>
  <script type="text/javascript" src="jquery.ztree-2.6.js"></script>


  <SCRIPT LANGUAGE="JavaScript">
  <!--
	var zTree1;
	var setting;

		setting = {
			checkable: true,
			async: true,
			asyncUrl: "asyncData/node.txt",  //鑾峰彇鑺傜偣鏁版嵁鐨刄RL鍦板潃
			asyncParam: ["name", "id"],  //鑾峰彇鑺傜偣鏁版嵁鏃讹紝蹇呴』鐨勬暟鎹悕绉帮紝渚嬪锛歩d銆乶ame
			asyncParamOther: ["test","true"], //鍏跺畠鍙傛暟 ( key, value 閿�瀵规牸寮�
			callback:{
				beforeAsync: zTreeBeforeAsync,
				asyncSuccess: zTreeOnAsyncSuccess,
				asyncError: zTreeOnAsyncError
			}
		};

		var zNodes =[];

	$(document).ready(function(){
		refreshTree('asyncData/node.txt');
	});

	function getTime() {
		var now= new Date();
		var hour=now.getHours();
		var minute=now.getMinutes();
		var second=now.getSeconds();
		return (hour+":"+minute+":"+second);	
	}

	var tmpUrl = "";
	function setAsyncUrl(treeNode) {
		tmpUrl = "asyncData/" + (tmpUrl.indexOf("fun1.txt")>-1 ? "fun2.txt" : "fun1.txt");
		$("#getUrl").html(tmpUrl);
		return tmpUrl;
	}

	function zTreeBeforeAsync(treeId, treeNode) {
		var r = $("#beforeAsyncTrue").attr("checked");
		if (!r) alert("beforeAsync return false!!");
		return r;
	}
	
	function zTreeOnAsyncSuccess(event, treeId, treeNode, msg) {
		if (treeNode) {
			$("#onAsyncSuccessNode").html( "[" + getTime() + "]  treeId=" + treeId + ";<br/>&nbsp;tId=" + treeNode.tId + "; Name=" + treeNode.name );
		} else {
			$("#onAsyncSuccessNode").html( "[" + getTime() + "]  treeNode is Root!");
		}
	}

	function zTreeOnAsyncError(event, treeId, treeNode, XMLHttpRequest, textStatus, errorThrown) {
		if (treeNode) {
			$("#onAsyncErrorNode").html( "[" + getTime() + "]  treeId=" + treeId + ";<br/>&nbsp;tId=" + treeNode.tId + "; Name=" + treeNode.name );
		} else {
			$("#onAsyncErrorNode").html( "[" + getTime() + "]  treeNode is Root!");
		}
	}

	function refreshTree(asyncUrl) {
		$("#getUrl").html("");
		$("#onAsyncSuccessNode").html("<br/>");
		$("#onAsyncErrorNode").html("<br/>");
		setting.asyncUrl = asyncUrl;
		if ((typeof asyncUrl) == "function") {
			$("#asyncUrlCode").html("setAsyncUrl");
		} else {
			$("#asyncUrlCode").html("\"" + asyncUrl + "\"" );
		}
		zTree1 = $("#treeDemo").zTree(setting, zNodes);
	}

	function reloadAsync() {
		var treeNode = zTree1.getSelectedNode();
		if (!treeNode) {
			alert("璇峰厛閫変腑涓�釜鑺傜偣");
			return;
		}
		zTree1.reAsyncChildNodes(treeNode, $("#refreshType").attr("checked") ? "refresh" : "add")
	}
	
	function getNow() {
		var d = new Date();
		return d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + "." + d.getMilliseconds()
	}

  //-->
  </SCRIPT>
 </HEAD>

<BODY>
<center class="headTitle">寮傛鍔犺浇婕旂ず</center>
<TABLE border=0 width="700" class="tb1">
	<TR>
		<TD width=340px align=center valign=top>
		<div class="zTreeDemoBackground">
			<ul id="treeDemo" class="tree"></ul>
		</div>		
		</TD>
		<TD width=360px align=left valign=top>
		<div class="demoContent">
			<li class="title focus">
				<button class="ico star" onfocus="this.blur();"></button>寮傛鍔犺浇鏁版嵁婧愰厤缃�
				<ul class="remark">鈥斺�浣跨敤 Tomcat 鐨勬湅鍙嬶紝鍙互鑷繁缂栧啓 node.jsp</ul>
				<ul>
					asyncUrl: <INPUT TYPE="radio" id="php" NAME="url" checked onclick="refreshTree('asyncData/node.txt');">node.txt锛堥潤鎬佹暟鎹級
					<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<INPUT TYPE="radio" id="jsp" NAME="url" onclick="refreshTree('asyncData/node.php');">node.php锛堝姩鎬佹暟鎹級
					<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<INPUT TYPE="radio" id="fun" NAME="url" onclick="refreshTree(setAsyncUrl);">function锛堟牴鎹妭鐐逛慨鏀筓RL鍦板潃锛�
				</ul>
				<ul class="event">
					<li>&nbsp;setting.async = true;</li>
					<li>&nbsp;setting.asyncUrl = <a id="asyncUrlCode"></a>;</li>
					<li>&nbsp;</li>
					<li>&nbsp;function return value :&nbsp;&nbsp;<a id="getUrl"></a></li>
				</ul>
			</li>
			<li class="title focus">
				<button class="ico star" onfocus="this.blur();"></button>鎿嶄綔鎸囩ず
				<ul class="operate">
					寮傛鍔犺浇閫変腑鑺傜偣鐨勫瓙鑺傜偣: <button onclick="reloadAsync();" title="寮傛鍔犺浇" onfocus="this.blur();" class="ico refresh"></button>
					鍔犺浇妯″紡锛�INPUT TYPE="radio" id="refreshType" name="reloadTypeRadio" checked onfocus="this.blur();">鍒锋柊
					<INPUT TYPE="radio" id="addType" name="reloadTypeRadio" onfocus="this.blur();">杩藉姞
				</ul>
			</li>
			<li class="title focus">
				<button class="ico books" onfocus="this.blur();"></button>寮傛鍔犺浇璇存槑
				<ul class="remark">
					寮傛鍔犺浇鏃惰幏鍙栫殑鏁版嵁鍙互鏄煇涓�骇鑺傜偣鐨勯泦鍚堛�
				</ul>
				<ul class="remark">
					寮傛鍔犺浇鏃惰幏鍙栫殑鏁版嵁涔熷彲浠ユ槸鑻ュ共绾ц妭鐐圭殑闆嗗悎锛�br/>鍙婊¤冻鏍戝舰缁撴瀯鐨勬暟鎹嵆鍙�
				</ul>
			</li>
			<li class="title focus">
				<button class="ico safari" onfocus="this.blur();"></button>浜嬩欢鐩戞帶
				<ul class="remark">鈥斺�淇敼 node.php 浜х敓鏈嶅姟鍣ㄩ敊璇彲瑙﹀彂onAsyncError浜嬩欢</ul>
				<ul>
					beforeAsync&nbsp;浜嬩欢 return:
					<INPUT TYPE="radio" id="beforeAsyncTrue" name="beforeAsyncRadio" checked onfocus="this.blur();">true;&nbsp;
					<INPUT TYPE="radio" id="beforeAsyncFalse" name="beforeAsyncRadio" onfocus="this.blur();">false
				</ul>
				<ul class="event">
				<li>onAsyncSuccess 浜嬩欢:&nbsp;&nbsp;<a id="onAsyncSuccessNode"><br/></a></li>
				</ul>
				<ul class="event">
				<li>onAsyncError 浜嬩欢:&nbsp;&nbsp;<a id="onAsyncErrorNode"><br/></a></li>
				</ul>
			</li>
				
		</div>	
		</TD>
	</TR>
</TABLE>

 </BODY>
</HTML>
